# gpt_json.yaml
# =========================================================
# JSON 多语言翻译工具配置（带详细注释）
#
# 适用场景
# - 在项目根目录执行（project-root/）
# - i18nDir 指向的目录存在（或由 sync 创建）
# - 翻译资源为 JSON：顶层为 object（key -> string）
#
# 设计目标
# - “目录结构/命名规则”显式写在配置里（layout）
# - init: 不存在则创建；存在则校验字段与类型
# - sync: 按 layout 推导应存在的目录/文件，缺失则列出并可创建
# - sort: 重复 key、占位符差异、冗余 key 检查 + 排序写回
# - translate: 按 prompts 与 options 做增量/全量翻译（后续实现）
# =========================================================

# -----------------------------
# OpenAI 相关（translate 会用）
# -----------------------------
openAIModel: gpt-4o
# 并发线程数：0 表示自动（建议实现为 min(8, CPU 核心数)）
maxWorkers: 0

# -----------------------------
# 语言设置
# -----------------------------
# 源语言（base）：冗余 key 检查/占位符对齐以它为准
source_locale:
  code: en
  name_en: English

# 目标语言列表（会生成/检查这些语言文件）
target_locales:
  - code: zh_Hant
    name_en: Traditional Chinese
  - code: de
    name_en: German
  - code: es
    name_en: Spanish
  - code: fil
    name_en: Filipino
  - code: fr
    name_en: French
  - code: hi
    name_en: Hindi
  - code: id
    name_en: Indonesian
  - code: ja
    name_en: Japanese
  - code: kk
    name_en: Kazakh
  - code: ko
    name_en: Korean
  - code: pt
    name_en: Portuguese
  - code: ru
    name_en: Russian
  - code: th
    name_en: Thai
  - code: uk
    name_en: Ukrainian
  - code: vi
    name_en: Vietnamese
  - code: tr
    name_en: Turkish
  - code: nl
    name_en: Dutch

# -----------------------------
# i18n 目录位置
# -----------------------------
# 翻译资源目录（相对项目根目录）
i18nDir: i18n

# 文件名后缀片段：会注入到 layout.pattern 的 {suffix}
# - 为空时：en.json / auth_en.json
# - 设为 ".i18n" 时：en.i18n.json / auth_en.i18n.json
fileSuffix: ""

# =========================================================
# 目录与命名规则
# =========================================================
layout:
  # 模式：auto / root / module
  # - auto：根据 i18nDir 下是否存在子目录自动判定
  # - root：强制根目录模式（不允许出现子目录）
  # - module：强制模块模式（必须存在至少一个模块子目录）
  mode: auto

  # 根目录模式（i18n/ 下无子目录时）
  # 资源文件路径形如：i18n/<code><suffix>.json
  root:
    pattern: "{code}{suffix}.json"

  # 模块模式（i18n/ 下存在子目录时，每个子目录视为模块）
  # 资源文件路径形如：i18n/<folder>/<folder>_<code><suffix>.json
  module:
    pattern: "{folder}_{code}{suffix}.json"

  # doctor/sync 的额外规则（用于更严格的项目约束）
  rules:
    # 是否允许存在“不符合 pattern 的 json 文件”
    # - false：发现就报问题（推荐，避免混入旧资源/配置文件）
    # - true：忽略不匹配文件，不报错
    allow_unmatched_files: false

    # 是否允许模块目录嵌套（一般不允许，越简单越可靠）
    # - false：i18n/<folder>/ 下若再出现子目录，doctor 报问题
    allow_nested_modules: false

# =========================================================
# 行为开关（sort / translate 等）
# =========================================================
options:
  # sort 是否对所有识别到的 json 文件按 key 字典序排序写回
  sort_keys: true

  # sort 是否检查并清理冗余 key（target 有但 base 没有）
  # - true：列出冗余 key；可通过 --yes 自动删除
  cleanup_extra_keys: true

  # translate 默认是否增量翻译
  # - true：只翻译 target 缺失或为空的 key
  # - false：全量覆盖翻译（谨慎使用）
  incremental_translate: true

  # 是否规范化文件名（可选：用于统一 code 格式，例如 zh-Hans vs zh_Hans）
  # 注：是否启用以及具体规范化策略，需要你在实现里明确（推荐谨慎开启）
  normalize_filenames: false

  # 是否在 translate 后自动执行一次 sort（可选）
  post_sort_after_translate: true

# =========================================================
# 翻译提示词（translate 会用）
# =========================================================
prompts:
  default_en: |
    Translate UI strings naturally for a mobile app.
    Be concise, clear, and consistent.

  by_locale_en:
    zh_Hant: |
      Use Taiwan Traditional Chinese UI style.
      Add spaces between Chinese and English characters when both appear in the same sentence, for readability.
      Keep financial/crypto UI terms consistent.

      Preferred term mapping examples (not strict word-by-word translation):
        - "Long/Short" → 做多/做空
        - "Deposit/Withdraw" → 充值/提現
        - "Position" → 倉位
        - "Order" → 訂單
        - "Subscription" → 申購
        - "Points" → 積分
        - "Affiliate" → 代理商
        - "Account" → 賬戶
        - "Size" → 數量
        - "Bonus" → 體驗金
        - "Omni Spot Swap" → "Omni 現貨賬戶"

    ja: |
      Use polite and concise Japanese UI tone.
      Prefer natural app wording.
      Avoid overly long sentences.

    ko: |
      Use natural Korean UI style.
      Prefer concise mobile UI wording.

placeholder:
  # 默认占位符规则
  # 所有 pattern 都会被视为“必须保留、必须一致”的占位符
  patterns:
    # {{amount}}
    - "\\{\\{\\s*[A-Za-z0-9_]+\\s*\\}\\}"

    # {amount}
    - "\\{[A-Za-z0-9_]+\\}"

    # printf 风格：%s %d %@ %1$s
    - "%(\\d+\\$)?[@a-zA-Z]"

